(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[127],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},740:(e,t,r)=>{Promise.resolve().then(r.bind(r,7226))},4585:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>m,Lf:()=>h,c7:()=>p});var s=r(2078),a=r(2553),n=r(9708),i=r(9996);let c=null,l=null,u=!1,o={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"glyph-hub-5000.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"glyph-hub-5000",NEXT_PUBLIC_FIREBASE_APP_ID:"1:58219751174:web:18337f5441f6cf1f06a087"};function d(){return Object.entries(o).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t})}function f(){return c||(0!==d().length?(u||(u=!0,console.warn("[firebase] Missing Firebase env vars. Add web/.env.local with NEXT_PUBLIC_ keys. Missing:",d())),null):c=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",authDomain:"glyph-hub-5000.firebaseapp.com",projectId:"glyph-hub-5000",storageBucket:"glyph-hub-5000.firebasestorage.app",messagingSenderId:"58219751174",appId:"1:58219751174:web:18337f5441f6cf1f06a087",measurementId:"G-N4T4Z5ZTL6"}))}function m(){let e=f();if(!e)return null;if(l)return l;try{l=(0,a.xI)(e)}catch(t){l=(0,a.Nu)(e,{persistence:[a.Gt,a.F0,a.iM]})}return l}function h(){let e=f();if(!e)return null;try{return(0,n._A)(e,{localCache:(0,n.vK)({tabManager:(0,n.K7)()})})}catch(t){return(0,n.aU)(e)}}function p(){let e=f();return e?(0,i.c7)(e):null}},7226:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(5155),a=r(2115),n=r(63),i=r(4585),c=r(9708);function l(){let e=(0,n.useParams)(),[t,r]=(0,a.useState)([]),[l,u]=(0,a.useState)(null);async function o(t){try{let r=(0,i.Lf)(),s=(0,i.Cy)(),a=null==s?void 0:s.currentUser;if(!r||!a)throw Error("Sign in required");await (0,c.BN)((0,c.H9)(r,"prompts",e.id),{title:t.title,body:t.body,updatedAt:(0,c.O5)()},{merge:!0}),alert("Restored")}catch(e){alert(e instanceof Error?e.message:"Failed to restore")}}return(0,a.useEffect)(()=>{!async function(){try{let t=(0,i.Lf)();if(!t)return;let s=(await (0,c.GG)((0,c.P)((0,c.rJ)(t,"prompts",e.id,"versions"),(0,c.My)("createdAt","desc")))).docs.map(e=>{let t=e.data();return{id:e.id,title:t.title||"",body:t.body||"",createdAt:t.createdAt}});r(s)}catch(e){u(e instanceof Error?e.message:"Failed to load versions")}}()},[e.id]),(0,s.jsxs)("div",{className:"mx-auto max-w-[900px] py-8",children:[(0,s.jsx)("h1",{className:"font-display text-2xl mb-4",children:"Versions"}),l&&(0,s.jsx)("div",{className:"text-sm text-red-400 mb-2",children:l}),(0,s.jsxs)("div",{className:"space-y-3",children:[t.map(e=>(0,s.jsxs)("div",{className:"rounded-[12px] border border-[var(--gh-border)] bg-[var(--gh-surface)] p-3",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,s.jsx)("pre",{className:"text-xs whitespace-pre-wrap mt-2 max-h-40 overflow-auto",children:e.body}),(0,s.jsx)("button",{onClick:()=>o(e),className:"mt-2 text-sm text-[var(--gh-cyan)]",children:"Restore"})]},e.id)),0===t.length&&(0,s.jsx)("div",{className:"text-sm text-[var(--gh-text-muted)]",children:"No versions yet."})]})]})}}},e=>{e.O(0,[135,965,31,441,255,358],()=>e(e.s=740)),_N_E=e.O()}]);