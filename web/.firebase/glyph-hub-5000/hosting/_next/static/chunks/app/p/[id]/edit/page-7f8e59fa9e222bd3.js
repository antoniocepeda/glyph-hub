(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},2943:(e,t,r)=>{"use strict";r.d(t,{BO:()=>n,ES:()=>s,Tk:()=>l,Uz:()=>i});var a=r(598);let i=a.Ikc({title:a.YjP().min(1,"Title is required").max(200),body:a.YjP().min(1,"Body is required").max(5e3),tags:a.YOg(a.YjP()).default([]),sourceUrl:a.YjP().url().nullable().optional().default(null),visibility:a.k5n(["public","unlisted","private"]).default("public")});function l(e){let t=e.title.trim(),r=e.body.replace(/\r\n/g,"\n").trim(),a=Array.from(new Set((e.tags||[]).map(e=>e.trim().toLowerCase()))).sort();return{title:t,body:r,tags:a,sourceUrl:e.sourceUrl||null,visibility:e.visibility||"public"}}let s=a.Ikc({title:a.YjP().min(1,"Title is required").max(120),visibility:a.k5n(["public","private"]).default("private")});function n(e){return{title:e.title.trim(),visibility:e.visibility||"private"}}},4339:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),i=r(2115),l=r(63),s=r(4585),n=r(9708),u=r(2943);function c(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),[r,c]=(0,i.useState)({title:"",body:"",tags:[],sourceUrl:null,visibility:"public"}),[o,d]=(0,i.useState)(!0),[b,p]=(0,i.useState)(null),[m,f]=(0,i.useState)(!1);async function x(a){a.preventDefault(),f(!0),p(null);try{let a=(0,s.Cy)(),i=null==a?void 0:a.currentUser;if(!i)throw Error("Please sign in");let l=u.Uz.parse(r),c=(0,u.Tk)(l),o=(0,s.Lf)();if(!o)throw Error("No DB");let d=(0,n.H9)((0,n.rJ)(o,"prompts",e.id,"versions"));await (0,n.BN)(d,{...c,authorId:i.uid,createdAt:(0,n.O5)()}),await (0,n.BN)((0,n.H9)(o,"prompts",e.id),{...c,updatedAt:(0,n.O5)()},{merge:!0}),t.push("/p/".concat(e.id))}catch(e){p(e instanceof Error?e.message:"Failed to save")}finally{f(!1)}}return((0,i.useEffect)(()=>{!async function(){try{let t=(0,s.Lf)();if(!t)return;let r=await (0,n.x7)((0,n.H9)(t,"prompts",e.id));if(r.exists()){let e=r.data();c({title:e.title||"",body:e.body||"",tags:e.tags||[],sourceUrl:e.sourceUrl||null,visibility:e.visibility||"public"})}}finally{d(!1)}}()},[e.id]),o)?(0,a.jsx)("div",{className:"mx-auto max-w-[900px] py-8",children:"Loading…"}):(0,a.jsxs)("div",{className:"mx-auto max-w-[900px] py-8",children:[(0,a.jsx)("h1",{className:"font-display text-2xl mb-4",children:"Edit Prompt"}),(0,a.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"Title"}),(0,a.jsx)("input",{className:"w-full rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:r.title,onChange:e=>c({...r,title:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"Body"}),(0,a.jsx)("textarea",{className:"w-full min-h-[200px] rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:r.body,onChange:e=>c({...r,body:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm mb-1",children:"Tags"}),(0,a.jsx)("input",{className:"w-full rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:r.tags.join(", "),onChange:e=>c({...r,tags:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)})})]}),b&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:b}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"rounded-[12px] px-4 py-2 text-sm bg-[var(--gh-cyan)] text-black",children:m?"Saving…":"Save"})]})]})}},4585:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>p,Lf:()=>m,c7:()=>f});var a=r(2078),i=r(2553),l=r(9708),s=r(9996);let n=null,u=null,c=!1,o={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"glyph-hub-5000.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"glyph-hub-5000",NEXT_PUBLIC_FIREBASE_APP_ID:"1:58219751174:web:18337f5441f6cf1f06a087"};function d(){return Object.entries(o).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t})}function b(){return n||(0!==d().length?(c||(c=!0,console.warn("[firebase] Missing Firebase env vars. Add web/.env.local with NEXT_PUBLIC_ keys. Missing:",d())),null):n=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",authDomain:"glyph-hub-5000.firebaseapp.com",projectId:"glyph-hub-5000",storageBucket:"glyph-hub-5000.firebasestorage.app",messagingSenderId:"58219751174",appId:"1:58219751174:web:18337f5441f6cf1f06a087",measurementId:"G-N4T4Z5ZTL6"}))}function p(){let e=b();if(!e)return null;if(u)return u;try{u=(0,i.xI)(e)}catch(t){u=(0,i.Nu)(e,{persistence:[i.Gt,i.F0,i.iM]})}return u}function m(){let e=b();if(!e)return null;try{return(0,l._A)(e,{localCache:(0,l.vK)({tabManager:(0,l.K7)()})})}catch(t){return(0,l.aU)(e)}}function f(){let e=b();return e?(0,s.c7)(e):null}},5688:(e,t,r)=>{Promise.resolve().then(r.bind(r,4339))}},e=>{e.O(0,[135,965,31,598,441,255,358],()=>e(e.s=5688)),_N_E=e.O()}]);