(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{2794:(e,t,s)=>{Promise.resolve().then(s.bind(s,5773))},4585:(e,t,s)=>{"use strict";s.d(t,{Cy:()=>p,Lf:()=>m});var r=s(2078),l=s(2553),a=s(9708);s(9996);let i=null,n=null,c=!1,d={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"glyph-hub-5000.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"glyph-hub-5000",NEXT_PUBLIC_FIREBASE_APP_ID:"1:58219751174:web:18337f5441f6cf1f06a087"};function u(){return Object.entries(d).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t})}function o(){return i||(0!==u().length?(c||(c=!0,console.warn("[firebase] Missing Firebase env vars. Add web/.env.local with NEXT_PUBLIC_ keys. Missing:",u())),null):i=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",authDomain:"glyph-hub-5000.firebaseapp.com",projectId:"glyph-hub-5000",storageBucket:"glyph-hub-5000.firebasestorage.app",messagingSenderId:"58219751174",appId:"1:58219751174:web:18337f5441f6cf1f06a087",measurementId:"G-N4T4Z5ZTL6"}))}function p(){let e=o();if(!e)return null;if(n)return n;try{n=(0,l.xI)(e)}catch(t){n=(0,l.Nu)(e,{persistence:[l.Gt,l.F0,l.iM]})}return n}function m(){let e=o();if(!e)return null;try{return(0,a._A)(e,{localCache:(0,a.vK)({tabManager:(0,a.K7)()})})}catch(t){return(0,a.aU)(e)}}},5773:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5155),l=s(2115),a=s(2619),i=s.n(a),n=s(4585),c=s(9708);function d(e){let t=e.stats||{};return 3*(t.likes||0)+2*(t.copies||0)+(t.views||0)}function u(){let[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)(null),[u,o]=(0,l.useState)(!1),[p,m]=(0,l.useState)(null),[h,x]=(0,l.useState)(!0);async function b(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o(!0),a(null);try{let s=(0,n.Lf)();if(!s)return;let r=(0,c.P)((0,c.rJ)(s,"prompts"),(0,c._M)("visibility","==","public"),(0,c.My)("createdAt","desc"),(0,c.AB)(20)),l=!e&&p?(0,c.P)(r,(0,c.HM)(p)):r,a=await (0,c.GG)(l),i=a.docs.map(e=>({id:e.id,...e.data()}));t(t=>e?i:t.concat(i));let d=a.docs[a.docs.length-1]||null;m(d),x(20===a.docs.length)}catch(e){a(e instanceof Error?e.message:"Failed to load public prompts")}finally{o(!1)}}(0,l.useEffect)(()=>{b(!0)},[]);let f=(0,l.useMemo)(()=>e.slice().sort((e,t)=>d(t)-d(e)),[e]);return(0,r.jsxs)("div",{className:"mx-auto max-w-[900px] py-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsx)("h1",{className:"font-display text-2xl",children:"Public Prompts"})}),s&&(0,r.jsx)("p",{className:"text-sm text-red-400 mb-2",children:s}),(0,r.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[f.map(e=>{var t,s,l;return(0,r.jsxs)(i(),{href:"/p/".concat(e.id),className:"group rounded-[16px] bg-[var(--gh-surface)] border border-[var(--gh-border)] p-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("h3",{className:"font-display text-lg",children:e.title})}),(0,r.jsx)("p",{className:"text-[var(--gh-text-dim)] text-sm line-clamp-3 mt-2",children:e.body}),(0,r.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:(e.tags||[]).map(e=>(0,r.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] text-[var(--gh-text-muted)]",children:["#",e]},e))}),(0,r.jsxs)("div",{className:"mt-3 text-xs text-[var(--gh-text-muted)]",children:[(null==(t=e.stats)?void 0:t.likes)||0," likes \xb7 ",(null==(s=e.stats)?void 0:s.copies)||0," copies \xb7 ",(null==(l=e.stats)?void 0:l.views)||0," views"]})]},e.id)}),0===f.length&&!u&&(0,r.jsx)("div",{className:"text-sm text-[var(--gh-text-muted)]",children:"No public prompts yet."})]}),(0,r.jsx)("div",{className:"mt-6 flex justify-center",children:(0,r.jsx)("button",{className:"rounded-[12px] px-4 py-2 text-sm border border-[var(--gh-border)] disabled:opacity-50",onClick:()=>b(!1),disabled:u||!h,children:u?"Loadingâ€¦":h?"Load more":"No more"})})]})}}},e=>{e.O(0,[135,965,31,619,441,255,358],()=>e(e.s=2794)),_N_E=e.O()}]);