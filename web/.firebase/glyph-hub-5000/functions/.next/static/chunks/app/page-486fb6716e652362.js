(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},2848:(e,t,r)=>{Promise.resolve().then(r.bind(r,3164))},3164:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),s=r(2115),n=r(9708),l=r(4585),i=r(2619),o=r.n(i),c=r(4152);(0,c.d_)("0123456789abcdefghijklmnopqrstuvwxyz",10);var u=r(63),d=r(7886),h=r(8875);function p(){let[e,t]=(0,s.useState)([]),[r,i]=(0,s.useState)(""),[c,h]=(0,s.useState)(null),p=(0,u.useRouter)();(0,s.useEffect)(()=>{!async function(){let e=(0,l.Lf)();if(e)try{let r=(0,l.Cy)(),a=null==r?void 0:r.currentUser;a||(a=await (0,d.XC)());let s=(0,n.rJ)(e,"prompts"),i=(0,n.P)(s,(0,n._M)("visibility","==","public")),o=(await (0,n.GG)(i)).docs.map(e=>({id:e.id,...e.data()}));t(o),o.slice(0,6).forEach(e=>p.prefetch("/p/".concat(e.id)))}catch(e){console.error("Failed to load prompts",e),h("Unable to load prompts yet. Try creating one.")}}()},[]);let f=(0,s.useMemo)(()=>{let t=r.trim().toLowerCase();return t?e.filter(e=>e.title.toLowerCase().includes(t)||(e.tags||[]).some(e=>e.toLowerCase().includes(t))):e},[e,r]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("section",{className:"py-8",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h1",{className:"font-display text-2xl",children:"GlyphHub"})})}),(0,a.jsx)("section",{className:"mb-8",children:(0,a.jsx)(m,{})}),(0,a.jsx)("section",{className:"py-2 mb-6",children:(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("input",{placeholder:"Search title or tags",value:r,onChange:e=>i(e.target.value),className:"w-full rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm placeholder:text-[var(--gh-text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--gh-cyan)]/50"}),c&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-400",children:c})]})}),(0,a.jsxs)("section",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[f.map(e=>(0,a.jsxs)(o(),{href:"/p/".concat(e.id),className:"group rounded-[16px] bg-[var(--gh-surface)] border border-[var(--gh-border)] p-4 shadow-[var(--gh-shadow-1)] hover:shadow-[var(--gh-shadow-2)] transition",children:[(0,a.jsx)("h3",{className:"font-display text-lg mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-[var(--gh-text-dim)] text-sm line-clamp-3",children:e.body}),(0,a.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:(e.tags||[]).map(e=>(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] text-[var(--gh-text-muted)]",children:["#",e]},e))})]},e.id)),0===f.length&&(0,a.jsx)("div",{className:"text-sm text-[var(--gh-text-muted)]",children:"No prompts found."})]})]})}function m(){let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),[u,p]=(0,s.useState)(!1),[m,f]=(0,s.useState)(null);return(0,a.jsxs)("div",{className:"rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"font-display",children:"Quick Paste"}),(0,a.jsx)(o(),{href:"/new",className:"text-xs text-[var(--gh-cyan)]",children:"Advanced"})]}),(0,a.jsx)("input",{placeholder:"Title (optional)",value:e,onChange:e=>t(e.target.value),className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm mb-2"}),(0,a.jsx)("textarea",{placeholder:"Paste your prompt...",value:r,onChange:e=>i(e.target.value),className:"w-full min-h-[100px] rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm"}),m&&(0,a.jsx)("div",{className:"text-xs text-red-400 mt-2",children:m}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("button",{disabled:u||!r.trim(),className:"rounded-[10px] px-3 py-2 text-sm bg-[var(--gh-cyan)] text-black",onClick:async()=>{p(!0),f(null);try{var t,a;let s=(0,l.Lf)();if(!s)throw Error("No DB");await (0,d.XC)();let i=(0,c.d_)("0123456789abcdefghijklmnopqrstuvwxyz",10)(),o=(0,n.H9)((0,n.rJ)(s,"prompts"),i);await (0,n.BN)(o,{title:e||"Untitled",body:r.trim(),tags:[],sourceUrl:null,visibility:"public",ownerId:(null==(a=(0,l.Cy)())||null==(t=a.currentUser)?void 0:t.uid)||"anon",checksum:(0,h.n)(r.trim()),stats:{views:0,copies:0,likes:0},createdAt:(0,n.O5)(),updatedAt:(0,n.O5)()}),window.location.href="/p/".concat(i)}catch(e){f(e instanceof Error?e.message:"Failed")}finally{p(!1)}},children:u?"Savingâ€¦":"Save"})})]})}},4152:(e,t,r)=>{"use strict";r.d(t,{d_:()=>s});let a=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,t=21)=>((e,t,r)=>{let a=(2<<Math.log2(e.length-1))-1,s=-~(1.6*a*t/e.length);return (n=t)=>{let l="";for(;;){let t=r(s),i=0|s;for(;i--;)if((l+=e[t[i]&a]||"").length>=n)return l}}})(e,0|t,a)},4585:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>p,Lf:()=>m,c7:()=>f});var a=r(2078),s=r(2553),n=r(9708),l=r(9996);let i=null,o=null,c=!1,u={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"glyph-hub-5000.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"glyph-hub-5000",NEXT_PUBLIC_FIREBASE_APP_ID:"1:58219751174:web:18337f5441f6cf1f06a087"};function d(){return Object.entries(u).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t})}function h(){return i||(0!==d().length?(c||(c=!0,console.warn("[firebase] Missing Firebase env vars. Add web/.env.local with NEXT_PUBLIC_ keys. Missing:",d())),null):i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",authDomain:"glyph-hub-5000.firebaseapp.com",projectId:"glyph-hub-5000",storageBucket:"glyph-hub-5000.firebasestorage.app",messagingSenderId:"58219751174",appId:"1:58219751174:web:18337f5441f6cf1f06a087",measurementId:"G-N4T4Z5ZTL6"}))}function p(){let e=h();if(!e)return null;if(o)return o;try{o=(0,s.xI)(e)}catch(t){o=(0,s.Nu)(e,{persistence:[s.Gt,s.F0,s.iM]})}return o}function m(){let e=h();if(!e)return null;try{return(0,n._A)(e,{localCache:(0,n.vK)({tabManager:(0,n.K7)()})})}catch(t){return(0,n.aU)(e)}}function f(){let e=h();return e?(0,l.c7)(e):null}},7886:(e,t,r)=>{"use strict";r.d(t,{CI:()=>c,NE:()=>i,XC:()=>u,mu:()=>o});var a=r(4585),s=r(2553),n=r(9708);async function l(e){let t=(0,a.Lf)();if(!t)return;let r=(0,n.H9)(t,"users",e.uid);(await (0,n.x7)(r)).exists()||await (0,n.BN)(r,{displayName:e.displayName||"",photoURL:e.photoURL||"",emailLower:(e.email||"").toLowerCase(),bio:"",createdAt:(0,n.O5)(),promptCount:0,likeCount:0})}async function i(e,t){let r=(0,a.Cy)();if(!r)throw console.warn("[auth] registerWithEmailPassword: no auth instance; possibly missing env"),Error("Firebase is not configured. Add .env.local");let n=await (0,s.eJ)(r,e,t);return await l(n.user),n.user}async function o(e,t){let r=(0,a.Cy)();if(!r)throw console.warn("[auth] signInWithEmailPassword: no auth instance; possibly missing env"),Error("Firebase is not configured. Add .env.local");let n=await (0,s.x9)(r,e,t);return await l(n.user),n.user}async function c(){let e=(0,a.Cy)();if(!e)return void console.debug("[auth] signOut: no auth instance; ignoring");await (0,s.CI)(e)}async function u(){let e=(0,a.Cy)();if(!e)return null;if(e.currentUser)return e.currentUser;try{return(await (0,s.zK)(e)).user}catch(e){return console.warn("[auth] Anonymous sign-in failed. Enable Anonymous provider in Firebase console.",e),null}}},8875:(e,t,r)=>{"use strict";function a(e){let t=0x811c9dc5;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=(t>>>0)*0x1000193>>>0;return(t>>>0).toString(16).padStart(8,"0")}r.d(t,{n:()=>a})}},e=>{e.O(0,[135,965,31,619,441,255,358],()=>e(e.s=2848)),_N_E=e.O()}]);