(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{63:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},4585:(e,t,s)=>{"use strict";s.d(t,{Cy:()=>x,Lf:()=>m});var a=s(2078),r=s(2553),l=s(9708);s(9996);let i=null,n=null,d=!1,c={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"glyph-hub-5000.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"glyph-hub-5000",NEXT_PUBLIC_FIREBASE_APP_ID:"1:58219751174:web:18337f5441f6cf1f06a087"};function u(){return Object.entries(c).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t})}function o(){return i||(0!==u().length?(d||(d=!0,console.warn("[firebase] Missing Firebase env vars. Add web/.env.local with NEXT_PUBLIC_ keys. Missing:",u())),null):i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",authDomain:"glyph-hub-5000.firebaseapp.com",projectId:"glyph-hub-5000",storageBucket:"glyph-hub-5000.firebasestorage.app",messagingSenderId:"58219751174",appId:"1:58219751174:web:18337f5441f6cf1f06a087",measurementId:"G-N4T4Z5ZTL6"}))}function x(){let e=o();if(!e)return null;if(n)return n;try{n=(0,r.xI)(e)}catch(t){n=(0,r.Nu)(e,{persistence:[r.Gt,r.F0,r.iM]})}return n}function m(){let e=o();if(!e)return null;try{return(0,l._A)(e,{localCache:(0,l.vK)({tabManager:(0,l.K7)()})})}catch(t){return(0,l.aU)(e)}}},5667:(e,t,s)=>{Promise.resolve().then(s.bind(s,7954))},7954:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),r=s(2115),l=s(63),i=s(4585),n=s(9708),d=s(2619),c=s.n(d),u=s(2553);function o(){var e,t;let s=(0,l.useParams)(),[d,u]=(0,r.useState)(null),[o,m]=(0,r.useState)([]),[h,b]=(0,r.useState)([]),[p,v]=(0,r.useState)(null),g=(0,r.useMemo)(()=>{var e,t;return(null==(t=(0,i.Cy)())||null==(e=t.currentUser)?void 0:e.uid)||null},[])===s.uid;return((0,r.useEffect)(()=>{!async function(){try{let e=(0,i.Lf)();if(!e)return;let t=await (0,n.x7)((0,n.H9)(e,"users",s.uid));t.exists()&&u(t.data());let a=await (0,n.GG)((0,n.P)((0,n.rJ)(e,"prompts"),(0,n._M)("ownerId","==",s.uid),(0,n._M)("visibility","==","public")));m(a.docs.map(e=>({id:e.id,...e.data()})));let r=await (0,n.GG)((0,n.P)((0,n.rJ)(e,"collections"),(0,n._M)("ownerId","==",s.uid),(0,n._M)("visibility","==","public")));b(r.docs.map(e=>({id:e.id,...e.data()})))}catch(e){v(e instanceof Error?e.message:"Failed to load profile")}}()},[s.uid]),p)?(0,a.jsx)("div",{className:"mx-auto max-w-[900px] py-8 text-red-400 text-sm",children:p}):(0,a.jsxs)("div",{className:"mx-auto max-w-[900px] py-8",children:[(0,a.jsx)("h1",{className:"font-display text-2xl mb-1",children:(null==d?void 0:d.displayName)||"User"}),g&&(0,a.jsx)(x,{initial:{displayName:(null==d?void 0:d.displayName)||"",bio:(null==d?void 0:d.bio)||"",theme:(null==d||null==(e=d.preferences)?void 0:e.theme)||"system",defaultVisibility:(null==d||null==(t=d.preferences)?void 0:t.defaultVisibility)||"public"},onSaved:e=>u(t=>({...t||{},displayName:e.displayName,bio:e.bio,preferences:{...(null==t?void 0:t.preferences)||{},theme:e.theme,defaultVisibility:e.defaultVisibility}}))}),(0,a.jsx)("div",{className:"mb-6 text-sm",children:(0,a.jsx)(c(),{href:"/help",className:"text-[var(--gh-cyan)]",children:"Browse the Help Center"})}),(0,a.jsx)("h2",{className:"font-display text-xl mb-3",children:"Public Prompts"}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[o.map(e=>(0,a.jsxs)(c(),{href:"/p/".concat(e.id),className:"rounded-[14px] p-4 bg-[var(--gh-surface)] border border-[var(--gh-border)]",children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-[var(--gh-text-muted)]",children:(e.tags||[]).join(", ")})]},e.id)),0===o.length&&(0,a.jsx)("div",{className:"text-sm text-[var(--gh-text-muted)]",children:"No public prompts."})]}),(0,a.jsx)("h2",{className:"font-display text-xl mt-8 mb-3",children:"Public Collections"}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[h.map(e=>(0,a.jsx)(c(),{href:"/collections/".concat(e.id),className:"rounded-[14px] p-4 bg-[var(--gh-surface)] border border-[var(--gh-border)]",children:(0,a.jsx)("div",{className:"font-medium",children:e.title})},e.id)),0===h.length&&(0,a.jsx)("div",{className:"text-sm text-[var(--gh-text-muted)]",children:"No public collections."})]})]})}function x(e){let{initial:t,onSaved:s}=e,[l,d]=(0,r.useState)(t.displayName),[c,o]=(0,r.useState)(t.bio),[x,m]=(0,r.useState)(t.theme),[h,b]=(0,r.useState)(t.defaultVisibility),[p,v]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null);async function y(){v(!0),f(null);try{var e,t,a;let r=null==(t=(0,i.Cy)())||null==(e=t.currentUser)?void 0:e.uid;if(!r)throw Error("Sign in");let d=(0,i.Lf)();if(!d)throw Error("No db");await (0,n.BN)((0,n.H9)(d,"users",r),{displayName:l||"",bio:c||"",preferences:{theme:x,defaultVisibility:h},updatedAt:(0,n.O5)()},{merge:!0});try{let e=null==(a=(0,i.Cy)())?void 0:a.currentUser;e&&await (0,u.r7)(e,{displayName:l||""})}catch(e){}s({displayName:l,bio:c,theme:x,defaultVisibility:h}),f("Saved")}catch(e){f(e instanceof Error?e.message:"Failed")}finally{v(!1)}}return(0,a.jsxs)("div",{className:"mb-8 p-4 rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)]",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Display name"}),(0,a.jsx)("input",{value:l,onChange:e=>d(e.target.value),className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Theme"}),(0,a.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"system",children:"System"}),(0,a.jsx)("option",{value:"light",children:"Light"}),(0,a.jsx)("option",{value:"dark",children:"Dark"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Bio"}),(0,a.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),className:"w-full min-h-[100px] rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Default visibility"}),(0,a.jsxs)("select",{value:h,onChange:e=>b(e.target.value),className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"public",children:"Public"}),(0,a.jsx)("option",{value:"unlisted",children:"Unlisted"}),(0,a.jsx)("option",{value:"private",children:"Private"})]})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:y,disabled:p,className:"rounded-[10px] px-3 py-2 text-sm bg-[var(--gh-cyan)] text-black",children:p?"Savingâ€¦":"Save settings"}),g&&(0,a.jsx)("span",{className:"text-sm text-[var(--gh-text-muted)]",children:g})]})]})}}},e=>{e.O(0,[135,965,31,619,441,255,358],()=>e(e.s=5667)),_N_E=e.O()}]);