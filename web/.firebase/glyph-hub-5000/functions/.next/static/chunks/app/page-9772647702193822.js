(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},2848:(e,t,r)=>{Promise.resolve().then(r.bind(r,9547))},4152:(e,t,r)=>{"use strict";r.d(t,{d_:()=>a});let s=e=>crypto.getRandomValues(new Uint8Array(e)),a=(e,t=21)=>((e,t,r)=>{let s=(2<<Math.log2(e.length-1))-1,a=-~(1.6*s*t/e.length);return (l=t)=>{let i="";for(;;){let t=r(a),n=0|a;for(;n--;)if((i+=e[t[n]&s]||"").length>=l)return i}}})(e,0|t,s)},4585:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>h,Lf:()=>p});var s=r(2078),a=r(2553),l=r(9708);r(9996);let i=null,n=null,c=!1,d={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"glyph-hub-5000.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"glyph-hub-5000",NEXT_PUBLIC_FIREBASE_APP_ID:"1:58219751174:web:18337f5441f6cf1f06a087"};function o(){return Object.entries(d).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t})}function u(){return i||(0!==o().length?(c||(c=!0,console.warn("[firebase] Missing Firebase env vars. Add web/.env.local with NEXT_PUBLIC_ keys. Missing:",o())),null):i=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",authDomain:"glyph-hub-5000.firebaseapp.com",projectId:"glyph-hub-5000",storageBucket:"glyph-hub-5000.firebasestorage.app",messagingSenderId:"58219751174",appId:"1:58219751174:web:18337f5441f6cf1f06a087",measurementId:"G-N4T4Z5ZTL6"}))}function h(){let e=u();if(!e)return null;if(n)return n;try{n=(0,a.xI)(e)}catch(t){n=(0,a.Nu)(e,{persistence:[a.Gt,a.F0,a.iM]})}return n}function p(){let e=u();if(!e)return null;try{return(0,l._A)(e,{localCache:(0,l.vK)({tabManager:(0,l.K7)()})})}catch(t){return(0,l.aU)(e)}}},8875:(e,t,r)=>{"use strict";function s(e){let t=0x811c9dc5;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=(t>>>0)*0x1000193>>>0;return(t>>>0).toString(16).padStart(8,"0")}r.d(t,{n:()=>s})},9547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5155),a=r(2115),l=r(9708),i=r(4585),n=r(2619),c=r.n(n),d=r(63),o=r(4152),u=r(8875);function h(e){let t=e.stats||{};return 3*(t.likes||0)+2*(t.copies||0)+(t.views||0)}function p(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),o=(0,d.useRouter)();(0,a.useEffect)(()=>{!async function(){let e=(0,i.Lf)();if(e)try{let r=(0,l.rJ)(e,"prompts"),s=(0,l.P)(r,(0,l._M)("visibility","==","public")),a=(await (0,l.GG)(s)).docs.map(e=>({id:e.id,...e.data()}));t(a),a.slice(0,6).forEach(e=>o.prefetch("/p/".concat(e.id)))}catch(e){console.error("Failed to load prompts",e),n("Unable to load prompts yet. Try creating one.")}}()},[]);let u=(0,a.useMemo)(()=>e.slice().sort((e,t)=>h(t)-h(e)).slice(0,3),[e]);return(0,s.jsxs)("div",{children:[(0,s.jsx)("section",{className:"mb-8",children:(0,s.jsx)(x,{})}),u.length>0&&(0,s.jsxs)("section",{className:"mt-8",children:[(0,s.jsx)("h2",{className:"font-display text-xl mb-3 text-[var(--gh-text-dim)]",children:"Trending"}),(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:u.map(e=>(0,s.jsxs)(c(),{href:"/p/".concat(e.id),className:"group rounded-[16px] bg-[var(--gh-surface)] border border-[var(--gh-border)] p-4 shadow-[var(--gh-shadow-1)] hover:shadow-[var(--gh-shadow-2)] transition",children:[(0,s.jsx)("h3",{className:"font-display text-lg mb-2",children:e.title}),(0,s.jsx)("p",{className:"text-[var(--gh-text-dim)] text-sm line-clamp-3",children:e.body}),(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:(e.tags||[]).map(e=>(0,s.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] text-[var(--gh-text-muted)]",children:["#",e]},e))})]},e.id))})]})]})}function x(){var e;let[t,r]=(0,a.useState)(""),[n,d]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[N,w]=(0,a.useState)("public"),[S,k]=(0,a.useState)(""),[_,C]=(0,a.useState)(""),[E,I]=(0,a.useState)(""),B=!!(null==(e=(0,i.Cy)())?void 0:e.currentUser);return(0,a.useEffect)(()=>{B||"private"!==N||w("public")},[B,N]),(0,a.useEffect)(()=>{!async function(){var e,t;let r=null==(t=(0,i.Cy)())||null==(e=t.currentUser)?void 0:e.uid;if(!r)return;let s=(0,i.Lf)();if(s)try{let e=await (0,l.x7)((0,l.H9)(s,"users",r));if(e.exists()){let t=e.data().preferences;(null==t?void 0:t.defaultVisibility)&&["public","unlisted","private"].includes(t.defaultVisibility)&&w(t.defaultVisibility)}}catch(e){}}()},[]),(0,s.jsxs)("div",{className:"rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"font-display",children:"Quick Paste"}),(0,s.jsx)("button",{type:"button",onClick:()=>g(e=>!e),className:"text-xs text-[var(--gh-cyan)]",children:b?"Basic":"Advanced"})]}),(0,s.jsx)("input",{placeholder:"Title (optional)",value:t,onChange:e=>r(e.target.value),className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm mb-2"}),(0,s.jsx)("textarea",{placeholder:"Paste your prompt...",value:n,onChange:e=>d(e.target.value),className:"w-full min-h-[100px] rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm"}),b&&(0,s.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Tags (comma separated)"}),(0,s.jsx)("input",{className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:f,onChange:e=>v(e.target.value),placeholder:"writing, brainstorming"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Source URL (optional)"}),(0,s.jsx)("input",{className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:y,onChange:e=>j(e.target.value),placeholder:"https://..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Preferred Model"}),(0,s.jsx)("input",{className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:S,onChange:e=>k(e.target.value),placeholder:"e.g., gpt-4o, llama-3-70b, claude-3.5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Description"}),(0,s.jsx)("input",{className:"w-full rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:_,onChange:e=>C(e.target.value),placeholder:"Short summary"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"How To Use"}),(0,s.jsx)("textarea",{className:"w-full min-h-[120px] rounded-[10px] bg-[var(--gh-bg-soft)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:E,onChange:e=>I(e.target.value),placeholder:"Step-by-step guidance"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs mb-1 text-[var(--gh-text-muted)]",children:"Visibility"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-1 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:"public"===N,onChange:()=>w("public")}),"Public"]}),(0,s.jsxs)("label",{className:"inline-flex items-center gap-1 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:"unlisted"===N,onChange:()=>w("unlisted")}),"Unlisted"]}),(0,s.jsxs)("div",{className:"inline-flex items-center gap-1 text-sm ".concat(B?"":"opacity-50"),children:[(0,s.jsxs)("label",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:"private"===N,onChange:()=>B&&w("private"),disabled:!B}),"Private"]}),!B&&(0,s.jsx)(c(),{href:"/login",className:"ml-2 text-xs text-[var(--gh-text-muted)] hover:underline underline-offset-2",children:"Sign in"})]})]})]})]}),x&&(0,s.jsx)("div",{className:"text-xs text-red-400 mt-2",children:x}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("button",{disabled:h||!n.trim(),className:"rounded-[10px] px-3 py-2 text-sm bg-[var(--gh-cyan)] text-black",onClick:async()=>{p(!0),m(null);try{var e;let r=b?N:"public",s=null==(e=(0,i.Cy)())?void 0:e.currentUser;if(!s&&"private"===r)throw Error("Please sign in to save as private");if(s){let e=(0,i.Lf)();if(!e)throw Error("No DB");let a=(0,o.d_)("0123456789abcdefghijklmnopqrstuvwxyz",10)(),c=(0,l.H9)((0,l.rJ)(e,"prompts"),a),d=b?f.split(",").map(e=>e.trim()).filter(Boolean):[],h=b&&y.trim()?y.trim():null,p={};b&&(S.trim()&&(p.preferredModel=S.trim()),_.trim()&&(p.description=_.trim()),E.trim()&&(p.howToUse=E.trim())),await (0,l.BN)(c,{title:t||"Untitled",body:n.trim(),tags:d,sourceUrl:h,visibility:r,ownerId:s.uid,checksum:(0,u.n)(n.trim()),stats:{views:0,copies:0,likes:0},createdAt:(0,l.O5)(),updatedAt:(0,l.O5)(),...p}),window.location.href="/p/".concat(a)}else{let e=(0,i.Lf)();if(!e)throw Error("No DB");let s=(0,o.d_)("0123456789abcdefghijklmnopqrstuvwxyz",10)(),a=(0,l.H9)((0,l.rJ)(e,"prompts"),s),c=b?f.split(",").map(e=>e.trim()).filter(Boolean):[],d=b&&y.trim()?y.trim():null,h={};b&&(S.trim()&&(h.preferredModel=S.trim()),_.trim()&&(h.description=_.trim()),E.trim()&&(h.howToUse=E.trim())),await (0,l.BN)(a,{title:t||"Untitled",body:n.trim(),tags:c,sourceUrl:d,visibility:r,ownerId:"anon",checksum:(0,u.n)(n.trim()),stats:{views:0,copies:0,likes:0},createdAt:(0,l.O5)(),updatedAt:(0,l.O5)(),...h}),window.location.href="/p/".concat(s)}}catch(e){m(e instanceof Error?e.message:"Failed")}finally{p(!1)}},children:h?"Savingâ€¦":"Save"})})]})}}},e=>{e.O(0,[135,965,31,619,441,255,358],()=>e(e.s=2848)),_N_E=e.O()}]);