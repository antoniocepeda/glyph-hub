(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},4423:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(5155),n=r(2115),s=r(7886),i=r(63),l=r(4585);function o(){let[e,t]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[d,p]=(0,n.useState)("signin"),[h,x]=(0,n.useState)(null),[b,g]=(0,n.useState)(!1),f=(0,i.useRouter)();async function m(){g(!0),x(null);try{let t=await (0,s.mu)(e,r);f.replace("/profile/".concat(t.uid))}catch(e){x(e instanceof Error?e.message:"Failed to sign in")}finally{g(!1)}}async function y(){g(!0),x(null);try{if(r.length<8)throw Error("Use at least 8 characters");if(r!==c)throw Error("Passwords do not match");let t=await (0,s.NE)(e,r);f.replace("/profile/".concat(t.uid))}catch(e){x(e instanceof Error?e.message:"Failed to register")}finally{g(!1)}}return(0,n.useEffect)(()=>{var e,t;let r=null==(t=(0,l.Cy)())||null==(e=t.currentUser)?void 0:e.uid;r&&f.replace("/profile/".concat(r))},[f]),(0,a.jsxs)("div",{className:"mx-auto max-w-[420px] py-10",children:[(0,a.jsx)("h1",{className:"font-display text-2xl mb-6",children:"signin"===d?"Sign in":"Create account"}),(0,a.jsxs)("div",{className:"mb-4 inline-flex rounded-[10px] border border-[var(--gh-border)] overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>p("signin"),className:"px-3 py-1 text-sm ".concat("signin"===d?"bg-[var(--gh-surface)] text-white":"text-[var(--gh-text-muted)] hover:text-white"),children:"Sign in"}),(0,a.jsx)("button",{onClick:()=>p("create"),className:"px-3 py-1 text-sm ".concat("create"===d?"bg-[var(--gh-surface)] text-white":"text-[var(--gh-text-muted)] hover:text-white"),children:"Create"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),className:"w-full rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm"}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:r,onChange:e=>o(e.target.value),className:"w-full rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm"}),"create"===d&&(0,a.jsx)("input",{type:"password",placeholder:"Confirm password",value:c,onChange:e=>u(e.target.value),className:"w-full rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm"}),h&&(0,a.jsx)("p",{className:"text-sm text-red-400",children:h}),"signin"===d?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:m,disabled:b,className:"rounded-[12px] px-3 py-2 text-sm bg-[var(--gh-cyan)] text-black",children:b?"...":"Sign in"}),(0,a.jsx)("button",{type:"button",onClick:()=>p("create"),className:"rounded-[12px] px-3 py-2 text-sm border border-[var(--gh-border)]",children:"Create account"})]}):(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:y,disabled:b,className:"rounded-[12px] px-3 py-2 text-sm bg-[var(--gh-cyan)] text-black",children:b?"...":"Create account"}),(0,a.jsx)("button",{type:"button",onClick:()=>p("signin"),className:"rounded-[12px] px-3 py-2 text-sm border border-[var(--gh-border)]",children:"I already have an account"})]})]})]})}},4585:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>p,Lf:()=>h});var a=r(2078),n=r(2553),s=r(9708);r(9996);let i=null,l=null,o=!1,c={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"glyph-hub-5000.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"glyph-hub-5000",NEXT_PUBLIC_FIREBASE_APP_ID:"1:58219751174:web:18337f5441f6cf1f06a087"};function u(){return Object.entries(c).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t})}function d(){return i||(0!==u().length?(o||(o=!0,console.warn("[firebase] Missing Firebase env vars. Add web/.env.local with NEXT_PUBLIC_ keys. Missing:",u())),null):i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",authDomain:"glyph-hub-5000.firebaseapp.com",projectId:"glyph-hub-5000",storageBucket:"glyph-hub-5000.firebasestorage.app",messagingSenderId:"58219751174",appId:"1:58219751174:web:18337f5441f6cf1f06a087",measurementId:"G-N4T4Z5ZTL6"}))}function p(){let e=d();if(!e)return null;if(l)return l;try{l=(0,n.xI)(e)}catch(t){l=(0,n.Nu)(e,{persistence:[n.Gt,n.F0,n.iM]})}return l}function h(){let e=d();if(!e)return null;try{return(0,s._A)(e,{localCache:(0,s.vK)({tabManager:(0,s.K7)()})})}catch(t){return(0,s.aU)(e)}}},7886:(e,t,r)=>{"use strict";r.d(t,{CI:()=>c,NE:()=>l,mu:()=>o});var a=r(4585),n=r(2553),s=r(9708);async function i(e){let t=(0,a.Lf)();if(!t)return;let r=(0,s.H9)(t,"users",e.uid);(await (0,s.x7)(r)).exists()||await (0,s.BN)(r,{displayName:e.displayName||"",photoURL:e.photoURL||"",emailLower:(e.email||"").toLowerCase(),bio:"",createdAt:(0,s.O5)(),promptCount:0,likeCount:0})}async function l(e,t){let r=(0,a.Cy)();if(!r)throw console.warn("[auth] registerWithEmailPassword: no auth instance; possibly missing env"),Error("Firebase is not configured. Add .env.local");let s=await (0,n.eJ)(r,e,t);return await i(s.user),s.user}async function o(e,t){let r=(0,a.Cy)();if(!r)throw console.warn("[auth] signInWithEmailPassword: no auth instance; possibly missing env"),Error("Firebase is not configured. Add .env.local");let s=await (0,n.x9)(r,e,t);return await i(s.user),s.user}async function c(){let e=(0,a.Cy)();if(!e)return void console.debug("[auth] signOut: no auth instance; ignoring");await (0,n.CI)(e)}},8038:(e,t,r)=>{Promise.resolve().then(r.bind(r,4423))}},e=>{e.O(0,[135,965,31,441,255,358],()=>e(e.s=8038)),_N_E=e.O()}]);