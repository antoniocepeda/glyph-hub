(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{63:(e,t,r)=>{"use strict";var i=r(7260);r.o(i,"useParams")&&r.d(t,{useParams:function(){return i.useParams}}),r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}})},2616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var i=r(5155),l=r(2115),s=r(598),a=r(2943),n=r(4585),u=r(9708),c=r(4152),o=r(63);let d=(0,c.d_)("0123456789abcdefghijklmnopqrstuvwxyz",10);function b(){let[e,t]=(0,l.useState)({title:"",visibility:"private"}),[r,c]=(0,l.useState)(null),[b,p]=(0,l.useState)(!1),f=(0,o.useRouter)();async function m(t){t.preventDefault(),c(null),p(!0);try{let t=(0,n.Cy)(),r=null==t?void 0:t.currentUser;if(!r)return void c("Please sign in");let i=a.ES.parse(e),l=(0,a.BO)(i),s=d(),o=(0,n.Lf)();if(!o)throw Error("Firebase is not configured. Add .env.local");let b=(0,u.H9)((0,u.rJ)(o,"collections"),s);await (0,u.BN)(b,{...l,ownerId:r.uid,createdAt:(0,u.O5)(),updatedAt:(0,u.O5)()}),f.push("/collections")}catch(e){if(e instanceof s.GaX){var r;c((null==(r=e.issues[0])?void 0:r.message)||"Validation error")}else e instanceof Error?c(e.message):c("Unknown error")}finally{p(!1)}}return(0,i.jsxs)("div",{className:"mx-auto max-w-[720px] py-8",children:[(0,i.jsx)("h1",{className:"font-display text-2xl mb-4",children:"New Collection"}),(0,i.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm mb-1",children:"Title"}),(0,i.jsx)("input",{className:"w-full rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:e.title,onChange:r=>t({...e,title:r.target.value})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm mb-1",children:"Visibility"}),(0,i.jsxs)("select",{className:"w-full rounded-[12px] bg-[var(--gh-surface)] border border-[var(--gh-border)] px-3 py-2 text-sm",value:e.visibility,onChange:r=>t({...e,visibility:r.target.value}),children:[(0,i.jsx)("option",{value:"private",children:"Private"}),(0,i.jsx)("option",{value:"public",children:"Public"})]})]}),r&&(0,i.jsx)("p",{className:"text-sm text-red-400",children:r}),(0,i.jsx)("button",{type:"submit",disabled:b,className:"rounded-[12px] px-4 py-2 text-sm bg-[var(--gh-cyan)] text-black",children:b?"Savingâ€¦":"Create"})]})]})}},2943:(e,t,r)=>{"use strict";r.d(t,{BO:()=>n,ES:()=>a,Tk:()=>s,Uz:()=>l});var i=r(598);let l=i.Ikc({title:i.YjP().min(1,"Title is required").max(200),body:i.YjP().min(1,"Body is required").max(5e3),tags:i.YOg(i.YjP()).default([]),sourceUrl:i.YjP().url().nullable().optional().default(null),visibility:i.k5n(["public","unlisted","private"]).default("public")});function s(e){let t=e.title.trim(),r=e.body.replace(/\r\n/g,"\n").trim(),i=Array.from(new Set((e.tags||[]).map(e=>e.trim().toLowerCase()))).sort();return{title:t,body:r,tags:i,sourceUrl:e.sourceUrl||null,visibility:e.visibility||"public"}}let a=i.Ikc({title:i.YjP().min(1,"Title is required").max(120),visibility:i.k5n(["public","private"]).default("private")});function n(e){return{title:e.title.trim(),visibility:e.visibility||"private"}}},4152:(e,t,r)=>{"use strict";r.d(t,{d_:()=>l});let i=e=>crypto.getRandomValues(new Uint8Array(e)),l=(e,t=21)=>((e,t,r)=>{let i=(2<<Math.log2(e.length-1))-1,l=-~(1.6*i*t/e.length);return (s=t)=>{let a="";for(;;){let t=r(l),n=0|l;for(;n--;)if((a+=e[t[n]&i]||"").length>=s)return a}}})(e,0|t,i)},4585:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>p,Lf:()=>f,c7:()=>m});var i=r(2078),l=r(2553),s=r(9708),a=r(9996);let n=null,u=null,c=!1,o={NEXT_PUBLIC_FIREBASE_API_KEY:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:"glyph-hub-5000.firebaseapp.com",NEXT_PUBLIC_FIREBASE_PROJECT_ID:"glyph-hub-5000",NEXT_PUBLIC_FIREBASE_APP_ID:"1:58219751174:web:18337f5441f6cf1f06a087"};function d(){return Object.entries(o).filter(e=>{let[,t]=e;return!t}).map(e=>{let[t]=e;return t})}function b(){return n||(0!==d().length?(c||(c=!0,console.warn("[firebase] Missing Firebase env vars. Add web/.env.local with NEXT_PUBLIC_ keys. Missing:",d())),null):n=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyBVxbbtB8yqSycBKbVs4HpORCc69nexI8c",authDomain:"glyph-hub-5000.firebaseapp.com",projectId:"glyph-hub-5000",storageBucket:"glyph-hub-5000.firebasestorage.app",messagingSenderId:"58219751174",appId:"1:58219751174:web:18337f5441f6cf1f06a087",measurementId:"G-N4T4Z5ZTL6"}))}function p(){let e=b();if(!e)return null;if(u)return u;try{u=(0,l.xI)(e)}catch(t){u=(0,l.Nu)(e,{persistence:[l.Gt,l.F0,l.iM]})}return u}function f(){let e=b();if(!e)return null;try{return(0,s._A)(e,{localCache:(0,s.vK)({tabManager:(0,s.K7)()})})}catch(t){return(0,s.aU)(e)}}function m(){let e=b();return e?(0,a.c7)(e):null}},7445:(e,t,r)=>{Promise.resolve().then(r.bind(r,2616))}},e=>{e.O(0,[135,965,31,598,441,255,358],()=>e(e.s=7445)),_N_E=e.O()}]);